# How to use visible

## create your app

```ts
export const App = () => {
        const visible = useVisible()
        return <span>{visible ? '👀' : '❌'}</span>
}
```

export const App = () => {
        const visible = useVisible()
        return <span>{visible ? '👀' : '❌'}</span>
}

<App />

## create useVisible

```ts
import { event } from 'reev'
import { useSyncExternalStore } from 'react'

export const self = event({
        mount(callback) {
                document.addEventListener('visibilitychange', callback)
        },
        clean(callback) {
                document.removeEventListener('visibilitychange', callback)
        },
})

export const subscribe = (callback) => {
        self.mount(callback)
        return () => self.clean()
}
export const getSnapshot = () => document.visibilityState === 'visible'
export const getServerSnapshot = () => false

export const useVisible = () => {
        return useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot)
}
```

import { event } from 'reev'
import { useSyncExternalStore } from 'react'

export const self = event({
        mount(callback) {
                document.addEventListener('visibilitychange', callback)
        },
        clean(callback) {
                document.removeEventListener('visibilitychange', callback)
        },
})

export const subscribe = (callback) => {
        self.mount(callback)
        return () => self.clean()
}
export const getSnapshot = () => document.visibilityState === 'visible'
export const getServerSnapshot = () => false

export const useVisible = () => {
        return useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot)
}
