# How to use media query

## create your app

```ts
export const App = () => {
        const matches = useMediaQuery('(min-width: 400px)')
        return <span>{matches ? '👀' : '❌'}</span>
}
```

export const App = () => {
        const matches = useMediaQuery('(min-width: 400px)')
        return <span>{matches}</span>
}

<App />

## create media query event

```ts
import { useEvent } from 'reev/react'
import { useSyncExternalStore, useCallback } from 'react'

export const useMediaQueryEvent = () => {
        const self = useEvent({
                mount(callback) {
                        self.mql.addEventListener('change', callback)
                },
                clean(callback) {
                        self.mql.removeEventListener('change', callback)
                },
        })
        return self
}
```

import { useEvent } from 'reev/react'
import { useSyncExternalStore, useCallback } from 'react'

export const useMediaQueryEvent = () => {
        const self = useEvent({
                mount(callback) {
                        self.mql.addEventListener('change', callback)
                },
                clean(callback) {
                        self.mql.removeEventListener('change', callback)
                },
        })
        return self
}

## create useMediaQuery hook

```ts
export const useMediaQuery = (query = '') => {
        const self = useMediaQueryEvent()
        return useSyncExternalStore(
                useCallback(
                        (callback) => {
                                self.mql = window.matchMedia(query)
                                self.mount(callback)
                                return () => self.clean(callback)
                        },
                        [query]
                ),
                () => self.mql?.matches,
                () => void 0
        )
}
```

export const useMediaQuery = (query = '') => {
        const self = useMediaQueryEvent()
        return useSyncExternalStore(
                useCallback(
                        (callback) => {
                                self.mql = window.matchMedia(query)
                                self.mount(callback)
                                return () => self.clean(callback)
                        },
                        [query]
                ),
                () => self.mql?.matches,
                () => void 0
        )

}
